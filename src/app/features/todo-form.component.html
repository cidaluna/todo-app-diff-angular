<div class="container">
  <h2>üìù Nova Tarefa</h2>
  <div class="top-bar-form">
    <button class="voltar" type="button" (click)="voltar()">Voltar</button>
  </div>
  <form [formGroup]="form" (ngSubmit)="saveAsDraft()">
    <label>
      T√≠tulo:
      <input formControlName="title" />
      <div *ngIf="form.get('title')?.touched && form.get('title')?.invalid">
        O t√≠tulo √© obrigat√≥rio.
      </div>
    </label>

    <label>
      Descri√ß√£o:
      <textarea formControlName="description"></textarea>
      <div *ngIf="form.get('description')?.touched && form.get('description')?.invalid">
        A descri√ß√£o √© obrigat√≥ria.
      </div>
    </label>

    <h3>Subtarefas:</h3>
    <div formArrayName="subtasks">
      <div *ngFor="let subtask of subtasks.controls; let i = index" [formGroupName]="i">
        <input formControlName="title" placeholder="Descri√ß√£o da subtarefa" />
        <input type="checkbox" formControlName="done" />
        <button class="btn-remover" type="button" (click)="removeSubtask(i)">Remover</button>
      </div>
    </div>

    <button class="btn-adicionar" type="button" (click)="addSubtask()">+ Adicionar Subtarefa</button>

    <br /><br />
    <button [disabled]="perfilUsuario !== 'EDITOR' && form.invalid" class="btn-salvar-rascunho" type="submit">Salvar como Rascunho</button>
    <br /><br />
    <button [disabled]="perfilUsuario !== 'APROVADOR'" class="btn-salvar-aprovacao" *ngIf="isEditing && perfilUsuario === 'APROVADOR'" type="button" (click)="saveForApproval()">
      Salvar para Aprova√ß√£o
    </button>
  </form>
</div>
